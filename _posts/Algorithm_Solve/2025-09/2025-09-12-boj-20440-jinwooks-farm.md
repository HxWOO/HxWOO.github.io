---
layout: post
title: "[BOJ] 20440 - ì§„ìš±ì´ì˜ ë†ì¥"
date: 2025-09-12 00:00:00 +0900
categories: [Algorithm_Solve]
tags: [brute-force, prefix-sum, binary-search, dp, implementation]
---

<br>

### ğŸ’» ë°±ì¤€ 20440ë²ˆ: ì§„ìš±ì´ì˜ ë†ì¥

- **ë¬¸ì œ ë§í¬:** [https://www.acmicpc.net/problem/20440](https://www.acmicpc.net/problem/20440)
- **ì•Œê³ ë¦¬ì¦˜ ë¶„ë¥˜:** ë¸Œë£¨íŠ¸í¬ìŠ¤, ëˆ„ì  í•©, ì´ë¶„ íƒìƒ‰, DP

## ë¬¸ì œ ì†Œê°œ ğŸ§

NÃ—N í¬ê¸°ì˜ ë†ì¥ì´ ìˆê³ , ì²˜ìŒì—ëŠ” ëª¨ë‘ 0ë²ˆ ê³¼ì¼ì´ ì‹¬ì–´ì ¸ ìˆë‹¤. Më²ˆ ì”¨ì•—ì„ ë¿Œë¦¬ëŠ”ë°, (X, Y)ë¥¼ ì™¼ìª½ ìœ„ ëª¨ì„œë¦¬ë¡œ í•˜ê³  ë³€ì˜ ê¸¸ì´ê°€ Lì¸ ì •ì‚¬ê°í˜• êµ¬ì—­ì— Fë²ˆ ê³¼ì¼ ì”¨ì•—ì„ ë®ì–´ì”Œìš´ë‹¤.

ì´ ë†ì¥ì—ì„œ **ê³¼ì¼ ì¢…ë¥˜ê°€ ìµœëŒ€ ë‘ ì¢…ë¥˜**ì´ê³ , **0ë²ˆ ê³¼ì¼ì€ í¬í•¨ë˜ì§€ ì•ŠëŠ”** ì •ì‚¬ê°í˜• ëª¨ì–‘ì˜ êµ¬ì—­ì„ ì˜ë¼ë‚´ë ¤ê³  í•  ë•Œ, ì–»ì„ ìˆ˜ ìˆëŠ” ê°€ì¥ ë„“ì€ ë†ì¥ì˜ ë„“ì´ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œë‹¤.

### ì…ë ¥ ğŸ“

- ì²«ì§¸ ì¤„: ë†ì¥ í¬ê¸° N (1 â‰¤ N â‰¤ 1,000), ì”¨ì•— ë¿Œë¦° íšŸìˆ˜ M (1 â‰¤ M â‰¤ 50)
- ë‘˜ì§¸ ì¤„ë¶€í„° Mê°œ ì¤„: X, Y, L, F (ì”¨ì•— ì •ë³´)

### ì¶œë ¥ ğŸ“¤

ì¤€ê·œê°€ ê°€ì ¸ê°ˆ ìˆ˜ ìˆëŠ” ê°€ì¥ ë„“ì€ ì •ì‚¬ê°í˜•ì˜ ë„“ì´ë¥¼ ì¶œë ¥í•œë‹¤.

### ì œí•œ âŒ

- ì‹œê°„ ì œí•œ: 2ì´ˆ
- ë©”ëª¨ë¦¬ ì œí•œ: 128MB

---

### ì²« ë²ˆì§¸ ì‹œë„: ë¸Œë£¨íŠ¸í¬ìŠ¤ ëƒ…ë‹¤ ë°•ê¸° ğŸ”¥

#### Idea

ì²˜ìŒì—ëŠ” ë¬¸ì œê°€ ì˜ ì´í•´ë˜ì§€ ì•Šì•„, ê°€ì¥ ë‹¨ìˆœí•œ ë°©ë²•ë¶€í„° ì‹œë„í•´ë³´ê¸°ë¡œ í–ˆë‹¤. ê°€ëŠ¥í•œ ê°€ì¥ í° ì •ì‚¬ê°í˜•ë¶€í„° í¬ê¸°ë¥¼ 1ì”© ì¤„ì—¬ê°€ë©´ì„œ, ë†ì¥ì˜ ëª¨ë“  ìœ„ì¹˜ë¥¼ ì‹œì‘ì ìœ¼ë¡œ í•˜ì—¬ í•´ë‹¹ ì •ì‚¬ê°í˜•ì´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ì™„ì „ íƒìƒ‰ ë°©ë²•ì´ë‹¤.

- ì •ì‚¬ê°í˜•ì˜ í•œ ë³€ì˜ ê¸¸ì´ë¥¼ `L`ì´ë¼ê³  í•  ë•Œ, `L`ì„ `N`ë¶€í„° `1`ê¹Œì§€ ê°ì†Œì‹œí‚¨ë‹¤.
- ëª¨ë“  ì‹œì‘ì  `(i, j)`ì— ëŒ€í•´ `L x L` í¬ê¸°ì˜ ì •ì‚¬ê°í˜•ì„ ê²€ì‚¬í•œë‹¤.
- ì •ì‚¬ê°í˜• ë‚´ë¶€ì— 0ë²ˆ ê³¼ì¼ì´ ìˆê±°ë‚˜, ê³¼ì¼ ì¢…ë¥˜ê°€ 3ì¢…ë¥˜ ì´ìƒì´ ë˜ë©´ ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì²« ë²ˆì§¸ `L`ì„ ì°¾ìœ¼ë©´, ê·¸ ë„“ì´ `L*L`ì„ ì¶œë ¥í•˜ê³  ì¦‰ì‹œ ì¢…ë£Œí•œë‹¤.

#### Code

```python
import sys
from collections import Counter

N, M = map(int, sys.stdin.readline().split())

field = [[0 for _ in range(N)] for _ in range(N)]

for _ in range(M):
    x, y, l, f = map(int, sys.stdin.readline().split())
    for i in range(x, x+l):
        for j in range(y, y+l):
            field[i][j] = f

for l in range(N, 0, -1):  # ê¸¸ì´ ì¤„ì—¬ê°€ë©° ë¹„êµ
    for i in range(0, N-l+1):  # ë¹„êµ ì‹œì‘ í–‰
        for j in range(0, N-l+1):  # ë¹„êµ ì‹œì‘ ì—´ 
            can_give = True
            seeds = set()
            for k in range(i, i+l):
                # ì”¨ì•— ì…‹ì— ê·¸ í–‰ì— ìˆëŠ” ì”¨ì•— ì¢…ë¥˜ë¥¼ union
                seeds.update(field[k][j:j+l])
                if 0 in seeds or len(seeds) > 2:
                    can_give = False
                    break
            
            if can_give:
                print(l*l)
                exit()
```

#### Result

- **ê²°ê³¼: ì‹œê°„ ì´ˆê³¼** ğŸ˜­
- ë‹¹ì—°í•œ ê²°ê³¼ì˜€ë‹¤. ì´ ì•Œê³ ë¦¬ì¦˜ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” ëŒ€ëµ `O(N^4)`ì— ìœ¡ë°•í•œë‹¤. (ê¸¸ì´ `L` * ì‹œì‘í–‰ `i` * ì‹œì‘ì—´ `j` * ë‚´ë¶€ìˆœíšŒ `L*L`ì˜ ì¼ë¶€). Nì´ 1,000ì¼ ë•Œ ì´ëŸ° ì•Œê³ ë¦¬ì¦˜ì€ ë‚˜ë„ ì²˜ìŒ ì§œë³´ëŠ” ê²ƒ ê°™ë‹¤.

---

### ë‘ ë²ˆì§¸ ì‹œë„: ì´ë¶„ íƒìƒ‰ê³¼ ëˆ„ì  í•©ìœ¼ë¡œ ê°œì„ í•˜ê¸° ğŸš€

#### Idea

ì‹œê°„ ë³µì¡ë„ë¥¼ ì¤„ì´ê¸° ìœ„í•´, ë¬¸ì œì˜ êµ¬ì¡°ë¥¼ ë°”ê¿”ë³´ê¸°ë¡œ í–ˆë‹¤. ì •ë‹µ(ì •ì‚¬ê°í˜•ì˜ ë„“ì´)ì„ ì§ì ‘ ì°¾ëŠ” ëŒ€ì‹ , **"í•œ ë³€ì˜ ê¸¸ì´ê°€ Lì¸ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì •ì‚¬ê°í˜•ì´ ì¡´ì¬í•˜ëŠ”ê°€?"** ë¼ëŠ” ê²°ì • ë¬¸ì œë¡œ ë°”ê¾¸ê³  **ì´ë¶„ íƒìƒ‰**ì„ ì ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

- `1`ë¶€í„° `N`ê¹Œì§€ì˜ ê¸¸ì´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì´ë¶„ íƒìƒ‰ì„ ìˆ˜í–‰í•œë‹¤.
- `valid(L)` í•¨ìˆ˜ëŠ” ê¸¸ì´ê°€ `L`ì¸ ì •ì‚¬ê°í˜•ì´ ì¡´ì¬í•˜ëŠ”ì§€ íŒë³„í•œë‹¤.
- `valid(L)` í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ 0ë²ˆ ê³¼ì¼ì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ ë¹ ë¥´ê²Œ í™•ì¸í•˜ê¸° ìœ„í•´ **2D ëˆ„ì  í•©**ì„ ì‚¬ìš©í–ˆë‹¤. íŠ¹ì • êµ¬ì—­ì˜ 0ì˜ ê°œìˆ˜ë¥¼ `O(1)`ì— ì•Œ ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ê³¼ì¼ ì¢…ë¥˜ê°€ 2ê°œ ì´í•˜ì¸ì§€ í™•ì¸í•˜ëŠ” ë¶€ë¶„ì€ ì—¬ì „íˆ ëª¨ë“  ì¹¸ì„ ìˆœíšŒí•´ì•¼ í–ˆë‹¤.

#### Code

```python
# ... (ì”¨ ë¿Œë¦¬ê¸° ë° ëˆ„ì  í•© ë°°ì—´ ìƒì„± ë¶€ë¶„ì€ ìœ„ì™€ ìœ ì‚¬) ...

# í•œ ë³€ ê¸¸ì´ l ì •ì‚¬ê°í˜•ì´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ ê²€ì‚¬
def valid(l):
    limit = N - l + 1
    for i in range(limit):
        for j in range(limit):
            x2, y2 = i + l - 1, j + l - 1

            # 0ì´ 1ê°œë¼ë„ ìˆìœ¼ë©´ ë¶ˆê°€ëŠ¥ (ëˆ„ì  í•©ìœ¼ë¡œ O(1)ì— ì²´í¬)
            if count_zero(i, j, x2, y2) > 0:
                continue

            # ì”¨ì•— ì¢…ë¥˜ íŒì • (ì—¬ì „íˆ O(l*l)ì´ ê±¸ë¦¼)
            kinds = set()
            can_sell = True
            for x in range(i, i + l):
                for y in range(j, j + l):
                    kinds.add(field[x][y])
                    if len(kinds) > 2:
                        can_sell = False
                        break
                if not can_sell:
                    break
            
            if can_sell:
                return True
    return False

# ì´ë¶„ íƒìƒ‰ ì‹¤í–‰
lo, hi = 1, N
best = 0
while lo <= hi:
    mid = (lo + hi) // 2
    if valid(mid):
        best = mid
        lo = mid + 1
    else:
        hi = mid - 1

print(best * best)
```

#### Result

- **ê²°ê³¼: ë˜ ì‹œê°„ ì´ˆê³¼...** ğŸ˜­
- ì•„ê¹Œë³´ë‹¨ ë‚˜ì•„ì¡Œì§€ë§Œ, `valid` í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ê³¼ì¼ ì¢…ë¥˜ë¥¼ ì²´í¬í•˜ëŠ” ë¶€ë¶„ì´ `O(L^2)`ì˜ ë³µì¡ë„ë¥¼ ê°€ì ¸ ì „ì²´ì ìœ¼ë¡œ `O(N^2 * L^2 * logN)` ìˆ˜ì¤€ì˜ ì‹œê°„ ë³µì¡ë„ê°€ ë°œìƒí–ˆë‹¤. ì´ê²ƒì´ íŒŒì´ì¬ì˜ í•œê³„ì¸ê°€ í•˜ëŠ” ìƒê°ë„ ì ì‹œ ë“¤ì—ˆë‹¤.

---

## ë°°ìš´ ì  ë° ê°œì„ í•  ë¶€ë¶„ ğŸ¤”

ë‘ ë²ˆì˜ ì‹œë„ê°€ ëª¨ë‘ ì‹œê°„ ì´ˆê³¼ëœ ê·¼ë³¸ì ì¸ ì›ì¸ì€, ì •ì‚¬ê°í˜• ë‚´ì˜ **'ê³¼ì¼ ì¢…ë¥˜'**ë¥¼ í™•ì¸í•˜ëŠ” ê³¼ì •ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë ¸ê¸° ë•Œë¬¸ì´ì—ˆë‹¤.

**í•µì‹¬ì€ ê³¼ì¼ ì¢…ë¥˜(F)ê°€ 7ê°œë¡œ ë§¤ìš° ì ë‹¤ëŠ” ì ì„ í™œìš©í•˜ëŠ” ê²ƒì´ì—ˆë‹¤.**

### ì •ë‹µ í’€ì´ ì•„ì´ë””ì–´

1.  ë¨¼ì €, ì¤€ê·œê°€ ê°€ì ¸ê°ˆ ìˆ˜ ìˆëŠ” ê³¼ì¼ ì¢…ë¥˜ì˜ **ëª¨ë“  ì¡°í•©**ì„ êµ¬í•œë‹¤. (ìµœëŒ€ 2ì¢…ë¥˜)
    -   í•œ ì¢…ë¥˜ë§Œ ìˆëŠ” ê²½ìš°: `{1}, {2}, ..., {7}` (7ê°€ì§€)
    -   ë‘ ì¢…ë¥˜ê°€ ìˆëŠ” ê²½ìš°: `{1, 2}, {1, 3}, ..., {6, 7}` (21ê°€ì§€)
    -   ì´ 28ê°€ì§€ì˜ ì¡°í•©ì´ ë‚˜ì˜¨ë‹¤. ì´ëŠ” ìƒìˆ˜ ì‹œê°„ìœ¼ë¡œ ì·¨ê¸‰í•  ìˆ˜ ìˆë‹¤.
2.  ê° ì¡°í•©ì— ëŒ€í•´, **í•´ë‹¹ ê³¼ì¼ë“¤ë¡œë§Œ êµ¬ì„±ëœ ê°€ì¥ í° ì •ì‚¬ê°í˜•**ì„ ì°¾ëŠ”ë‹¤.
3.  'íŠ¹ì • ì¢…ë¥˜ì˜ ê³¼ì¼ë“¤ë¡œë§Œ êµ¬ì„±ëœ ê°€ì¥ í° ì •ì‚¬ê°í˜•'ì„ ì°¾ëŠ” ê²ƒì€ `O(N^2)` **DP**ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ìœ ëª…í•œ ë¬¸ì œë‹¤.
    -   `dp[i][j]` = `(i, j)`ë¥¼ ìš°ì¸¡ í•˜ë‹¨ ê¼­ì§“ì ìœ¼ë¡œ í•˜ëŠ”, ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê°€ì¥ í° ì •ì‚¬ê°í˜•ì˜ í•œ ë³€ì˜ ê¸¸ì´
    -   `field[i][j]`ê°€ í•´ë‹¹ ê³¼ì¼ ì¡°í•©ì— ì†í•œë‹¤ë©´, `dp[i][j] = min(dp[i-1][j], dp[i][j-1], dp[i-1][j-1]) + 1` ì í™”ì‹ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

ì´ ì ‘ê·¼ë²•ì˜ ì „ì²´ ì‹œê°„ ë³µì¡ë„ëŠ” `O(F^2 * N^2)`ì´ ë˜ì–´, ì‹œê°„ ë‚´ì— ì¶©ë¶„íˆ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ê³¼ì¼ ì¢…ë¥˜ê°€ ì ë‹¤ëŠ” ì œí•œ ì¡°ê±´ì„ ì–´ë–»ê²Œ í™œìš©í• ì§€ê°€ ë¬¸ì œ í•´ê²°ì˜ ì—´ì‡ ì˜€ë‹¤.

> ê²°êµ­, ë¬¸ì œì˜ í•µì‹¬ ì œì•½ ì¡°ê±´ì„ íŒŒì•…í•˜ê³  ê·¸ì— ë§ëŠ” ì•Œê³ ë¦¬ì¦˜(DP)ì„ ì„¤ê³„í•˜ëŠ” ëŠ¥ë ¥ì´ ì¤‘ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ë‹¤ì‹œ í•œë²ˆ ê¹¨ë‹¬ì•˜ë‹¤.

<div style="text-align: center">â‚</div>
