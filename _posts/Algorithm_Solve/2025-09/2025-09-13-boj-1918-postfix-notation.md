---
layout: post
title: "[BOJ] 1918 - í›„ìœ„ í‘œê¸°ì‹"
date: 2025-09-13 00:00:00 +0900
categories: [Algorithm_Solve]
tags: [stack, string, implementation, shunting-yard]
---

<br>

### ğŸ’» ë°±ì¤€ 1918ë²ˆ: í›„ìœ„ í‘œê¸°ì‹

- **ë¬¸ì œ ë§í¬:** [https://www.acmicpc.net/problem/1918](https://www.acmicpc.net/problem/1918)
- **ì•Œê³ ë¦¬ì¦˜ ë¶„ë¥˜:** ìŠ¤íƒ, ë¬¸ìì—´ ì²˜ë¦¬

## ë¬¸ì œ ì†Œê°œ ğŸ§

ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ìˆ˜ì‹ì€ ì—°ì‚°ìê°€ í”¼ì—°ì‚°ì ì‚¬ì´ì— ìˆëŠ” **ì¤‘ìœ„ í‘œê¸°ì‹(Infix Notation)** ì´ë‹¤. ì´ì™€ ë‹¬ë¦¬ ì—°ì‚°ìê°€ í”¼ì—°ì‚°ì ë’¤ì— ì˜¤ëŠ” **í›„ìœ„ í‘œê¸°ì‹(Postfix Notation)** ì´ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `A+B`ëŠ” `AB+`ê°€ ëœë‹¤.

í›„ìœ„ í‘œê¸°ì‹ì˜ ì¥ì ì€ ê´„í˜¸ ì—†ì´ë„ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ì»´í“¨í„°ê°€ ìˆ˜ì‹ì„ ê³„ì‚°í•  ë•Œ ìŠ¤íƒì„ ì´ìš©í•´ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

ì´ ë¬¸ì œëŠ” ì£¼ì–´ì§„ ì¤‘ìœ„ í‘œê¸°ì‹ì„ í›„ìœ„ í‘œê¸°ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ë‹¤.

### ì…ë ¥ ğŸ“

ì²«ì§¸ ì¤„ì— ì¤‘ìœ„ í‘œê¸°ì‹ì´ ì£¼ì–´ì§„ë‹¤. í”¼ì—°ì‚°ìëŠ” ì•ŒíŒŒë²³ ëŒ€ë¬¸ìì´ë©°, ì—°ì‚°ìëŠ” `+`, `-`, `*`, `/`ì™€ ê´„í˜¸ `(`, `)`ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. ê¸¸ì´ëŠ” 100ì„ ë„˜ì§€ ì•ŠëŠ”ë‹¤.

### ì¶œë ¥ ğŸ“¤

ì²«ì§¸ ì¤„ì— í›„ìœ„ í‘œê¸°ì‹ìœ¼ë¡œ ë°”ë€ ì‹ì„ ì¶œë ¥í•œë‹¤.

---

### ì²« ë²ˆì§¸ ì‹œë„: ì¬ê·€ì™€ ìŠ¤íƒìœ¼ë¡œ ì–´ë–»ê²Œë“ ... ğŸ¤¯

#### Idea

ì²˜ìŒì—ëŠ” ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•´ì„œ ìŠ¤íƒê³¼ ì¬ê·€ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ í’€ ìˆ˜ ìˆì„ ê²ƒì´ë¼ ìƒê°í–ˆë‹¤.

- ê´„í˜¸ê°€ ë‚˜ì˜¤ë©´ ê·¸ ë‚´ë¶€ë¥¼ ì¬ê·€ í•¨ìˆ˜ë¡œ ë„˜ê²¨ ì²˜ë¦¬í•œë‹¤.
- ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ ì—°ì‚°ì(+, -)ê°€ ë‚˜ì˜¤ë©´, ê·¸ ì „ì— ìŠ¤íƒì— ìŒ“ì¸ ë†’ì€ ìš°ì„ ìˆœìœ„ ì—°ì‚°ì(*, /)ì™€ í”¼ì—°ì‚°ìë¥¼ ë¨¼ì € ê²°ê³¼ì— ì¶”ê°€í•œë‹¤.
- í”¼ì—°ì‚°ìëŠ” ë³„ë„ì˜ ë±ì—, ì—°ì‚°ìëŠ” ìŠ¤íƒì— ì €ì¥í•˜ë©° ë¡œì§ì„ êµ¬í˜„í–ˆë‹¤.

#### Code

```python
import sys
from collections import deque

sys.setrecursionlimit(30000)
s = deque(sys.stdin.readline().rstrip())

def transfer_to_suffix(s: deque):
    let_deq = deque()
    op_stack = []
    answer_stack = []
    while s:
        cur = s.popleft()
        if cur == '(':  # ê´„í˜¸ ì‹œì‘
            inner_s = deque()
            nested = 1
            while nested > 0 and s:
                cur = s.popleft()
                if cur == '(': nested += 1
                if cur == ')':
                    nested -= 1
                    if nested == 0: break
                inner_s.append(cur)
            
            parentheses = transfer_to_suffix(inner_s)
            let_deq.append(parentheses)
        elif cur == '*' or cur == '/':
            op_stack.append(cur)
        elif cur == '+' or cur == '-':
            if '*' in op_stack or '/' in op_stack:
                while let_deq:
                    val = let_deq.popleft()
                    answer_stack.append(val)
                while op_stack:
                    answer_stack.append(op_stack.pop())
            op_stack.append(cur)
        else:
            let_deq.append(cur)
    
    while let_deq:
        val = let_deq.popleft()
        answer_stack.append(val)
    while op_stack:
        answer_stack.append(op_stack.pop())

    return answer_stack

# ... ê²°ê³¼ê°€ ë¦¬ìŠ¤íŠ¸ì˜ ë¦¬ìŠ¤íŠ¸ë¡œ ë‚˜ì™€ì„œ flattenì´ í•„ìš”í–ˆìŒ ...
print(*transfer_to_suffix(s), sep='')
```

#### Result

- **ê²°ê³¼: ì‹¤íŒ¨** ğŸ˜­
- ë¡œì§ì´ ë„ˆë¬´ ë³µì¡í•´ì¡Œê³ , ë‹¤ì–‘í•œ ì˜ˆì™¸ ì¼€ì´ìŠ¤(íŠ¹íˆ ì¤‘ì²©ëœ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ ì²˜ë¦¬)ë¥¼ ì œëŒ€ë¡œ ë‹¤ë£¨ì§€ ëª»í–ˆë‹¤. ì¬ê·€ì™€ ì—¬ëŸ¬ ê°œì˜ ìë£Œêµ¬ì¡°ê°€ ì–½íˆë©´ì„œ ì œì–´í•˜ê¸°ê°€ ë„ˆë¬´ ì–´ë ¤ì› ë‹¤.

---

### ë‘ ë²ˆì§¸ ì‹œë„: ì…˜íŒ… ì•¼ë“œ(Shunting-yard) ì•Œê³ ë¦¬ì¦˜ âœ¨

#### Idea

ì²« ì‹œë„ì˜ ì‹¤íŒ¨ í›„, ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ì •ì„ì ì¸ ë°©ë²•ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤. ë°”ë¡œ ì»´í“¨í„° ê³¼í•™ì ë‹¤ìµìŠ¤íŠ¸ë¼ê°€ ê³ ì•ˆí•œ [ì…˜íŒ… ì•¼ë“œ(Shunting-yard) ì•Œê³ ë¦¬ì¦˜](https://hxwoo.github.io/computer_science/2025/09/12/shunting-yard-algorithm.html)ì´ë‹¤. ì´ ì•Œê³ ë¦¬ì¦˜ì€ ìŠ¤íƒ í•˜ë‚˜ë¥¼ ì´ìš©í•´ ì¤‘ìœ„ í‘œê¸°ì‹ì„ í›„ìœ„ í‘œê¸°ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë§¤ìš° íš¨ìœ¨ì ì´ê³  ê¹”ë”í•œ ë°©ë²•ì„ ì œê³µí•œë‹¤.

ì•Œê³ ë¦¬ì¦˜ì˜ ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

1.  í”¼ì—°ì‚°ì(ì•ŒíŒŒë²³)ëŠ” ë°”ë¡œ ì¶œë ¥í•œë‹¤.
2.  ì—°ì‚°ìë¥¼ ë§Œë‚˜ë©´, ìŠ¤íƒì˜ ë§¨ ìœ„(top)ì— ìˆëŠ” ì—°ì‚°ìê°€ ìì‹ ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë†’ê±°ë‚˜ ê°™ìœ¼ë©´ ìŠ¤íƒì—ì„œ êº¼ë‚´(pop) ì¶œë ¥í•˜ê³ , ìì‹ ì„ ìŠ¤íƒì— ë„£ëŠ”ë‹¤(push). (ë‹¨, ìŠ¤íƒ topì´ ì—¬ëŠ” ê´„í˜¸ì´ë©´ ë©ˆì¶˜ë‹¤)
3.  ì—¬ëŠ” ê´„í˜¸ `(`ëŠ” ë¬´ì¡°ê±´ ìŠ¤íƒì— ë„£ëŠ”ë‹¤.
4.  ë‹«ëŠ” ê´„í˜¸ `)`ë¥¼ ë§Œë‚˜ë©´, ì—¬ëŠ” ê´„í˜¸ `(`ê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ìŠ¤íƒì—ì„œ ëª¨ë“  ì—°ì‚°ìë¥¼ êº¼ë‚´ ì¶œë ¥í•œë‹¤. `(`ëŠ” ìŠ¤íƒì—ì„œ êº¼ë‚´ê¸°ë§Œ í•˜ê³  ì¶œë ¥í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.
5.  ëª¨ë“  í† í°ì„ ì²˜ë¦¬í•œ í›„, ìŠ¤íƒì— ë‚¨ì•„ìˆëŠ” ëª¨ë“  ì—°ì‚°ìë¥¼ êº¼ë‚´ ì¶œë ¥í•œë‹¤.

#### Code

```python
import sys

s = list(sys.stdin.readline().rstrip())

precedence = {'(':0, '+':1, '-':1, '*':2, '/':2}
output = []
op_stack = []

for token in s:
    if token.isalpha():  # 1. í”¼ì—°ì‚°ì
        output.append(token)
    
    elif token == '(':  # 3. ì—¬ëŠ” ê´„í˜¸
        op_stack.append(token)
    
    elif token == ')':  # 4. ë‹«ëŠ” ê´„í˜¸
        while op_stack and op_stack[-1] != '(':
            output.append(op_stack.pop())
        op_stack.pop()  # '(' ë²„ë¦¬ê¸°
    else:  # 2. ì—°ì‚°ì
        while op_stack and precedence.get(op_stack[-1], 0) >= precedence[token]:
            output.append(op_stack.pop())
        op_stack.append(token)
    
while op_stack:  # 5. ë‚¨ì€ ì—°ì‚°ì ì²˜ë¦¬
    output.append(op_stack.pop())

print(''.join(output))
```

#### Result

- **ê²°ê³¼: ì„±ê³µ!** ğŸ‰
- ì…˜íŒ… ì•¼ë“œ ì•Œê³ ë¦¬ì¦˜ì˜ ê·œì¹™ì„ ê·¸ëŒ€ë¡œ êµ¬í˜„í•˜ë‹ˆ ë³µì¡í–ˆë˜ ë¬¸ì œê°€ ì•„ì£¼ ê°„ë‹¨í•˜ê²Œ í’€ë ¸ë‹¤.

---

## ë°°ìš´ ì  ë° ê°œì„ í•  ë¶€ë¶„ ğŸ¤”

- **ì•Œê³ ë¦¬ì¦˜ì˜ ì¤‘ìš”ì„±:** ë³µì¡í•œ ë¬¸ìì—´ íŒŒì‹±ì´ë‚˜ ìˆ˜ì‹ ì²˜ë¦¬ ë¬¸ì œëŠ” ì§ì ‘ ê·œì¹™ì„ ë§Œë“¤ì–´ í•´ê²°í•˜ë ¤ í•˜ê¸°ë³´ë‹¤, ì´ë¯¸ ê²€ì¦ëœ ê³ ì „ì ì¸ ì•Œê³ ë¦¬ì¦˜ì´ ìˆëŠ”ì§€ ì°¾ì•„ë³´ëŠ” ê²ƒì´ í›¨ì”¬ íš¨ìœ¨ì ì´ë¼ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ë‹¤.
- **ì…˜íŒ… ì•¼ë“œ ì•Œê³ ë¦¬ì¦˜:** ìŠ¤íƒì„ ì´ìš©í•´ ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì´ ì•Œê³ ë¦¬ì¦˜ì˜ ì›ë¦¬ë¥¼ ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆë‹¤. ì»´í“¨í„°ê°€ ì–´ë–»ê²Œ ìˆ˜ì‹ì„ í•´ì„í•˜ê³  ê³„ì‚°í•˜ëŠ”ì§€ì— ëŒ€í•œ ê·¼ë³¸ì ì¸ ì´í•´ë¥¼ ë•ëŠ” ì¢‹ì€ ê²½í—˜ì´ì—ˆë‹¤.

> "ë°”í€´ë¥¼ ë‹¤ì‹œ ë°œëª…í•˜ë ¤ í•˜ì§€ ë§ì." í›Œë¥­í•œ ì„ ë°° ê°œë°œìë“¤ì´ ë§Œë“¤ì–´ ë†“ì€ ì•Œê³ ë¦¬ì¦˜ì„ ë°°ìš°ê³  í™œìš©í•˜ëŠ” ê²ƒì´ ì„±ì¥ì˜ ì§€ë¦„ê¸¸ì´ë¼ëŠ” ê²ƒì„ ëŠê¼ˆë‹¤.

<div style="text-align: center">â‚</div>
