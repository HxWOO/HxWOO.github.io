---
layout: post
title: "[ë°±ì¤€] 1987ë²ˆ: ì•ŒíŒŒë²³ - ë°±íŠ¸ë˜í‚¹"
date: 2025-08-29 10:00:00 +0900
categories: [Algorithm_Solve]
tags: [boj, backtracking, dfs, python]
---

<br>

### ğŸ’» ë°±ì¤€ 1987ë²ˆ: ì•ŒíŒŒë²³

- **ë¬¸ì œ ë§í¬:** [https://www.acmicpc.net/problem/1987](https://www.acmicpc.net/problem/1987)
- **ì•Œê³ ë¦¬ì¦˜ ë¶„ë¥˜:** ë°±íŠ¸ë˜í‚¹, ê¹Šì´ ìš°ì„  íƒìƒ‰(DFS)

## ë¬¸ì œ ì†Œê°œ ğŸ§
R x C í¬ê¸°ì˜ ë³´ë“œì—ì„œ, ê°™ì€ ì•ŒíŒŒë²³ì„ ë‘ ë²ˆ ì§€ë‚˜ì§€ ì•Šìœ¼ë©´ì„œ ë§ì´ ìµœëŒ€í•œ ëª‡ ì¹¸ì„ ì§€ë‚  ìˆ˜ ìˆëŠ”ì§€ êµ¬í•˜ëŠ” ë¬¸ì œì´ë‹¤.

### ì…ë ¥ ğŸ“

- ì²«ì§¸ ì¤„ì— Rê³¼ Cê°€ ì£¼ì–´ì§„ë‹¤. (1 â‰¤ R,C â‰¤ 20)
- ë‘˜ì§¸ ì¤„ë¶€í„° Rê°œì˜ ì¤„ì— ê±¸ì³ Cê°œì˜ ëŒ€ë¬¸ì ì•ŒíŒŒë²³ì´ ê³µë°± ì—†ì´ ì£¼ì–´ì§„ë‹¤.

### ì¶œë ¥ ğŸ“¤

- ë§ì´ ì§€ë‚  ìˆ˜ ìˆëŠ” ìµœëŒ€ì˜ ì¹¸ ìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤.

### ì œí•œ âŒ

- ì‹œê°„ ì œí•œ: 2ì´ˆ
- ë©”ëª¨ë¦¬ ì œí•œ: 256MB

---

## ì²« ë²ˆì§¸ ì‹œë„: ë‹¨ìˆœ DFS

ì²˜ìŒì—ëŠ” ê°„ë‹¨í•œ DFSë¡œ ì ‘ê·¼í–ˆë‹¤. ë°©ë¬¸í•œ ì•ŒíŒŒë²³ì„ ê¸°ë¡í•˜ë©´ì„œ íƒìƒ‰í•˜ë©´ ë  ê²ƒì´ë¼ê³  ìƒê°í–ˆë‹¤.

```python
import sys

R, C = map(int, sys.stdin.readline().split())
board = [list(sys.stdin.readline().rstrip()) for _ in range(R)]
move = [(-1, 0), (0, -1), (1, 0), (0, 1)] # ìƒ ì¢Œ í•˜ ìš°

def dfs(board, start: tuple[int, int]):
    global R, C
    global move

    visited_alphabet = [False] * 26
    stack = []
    stack.append(start)
    visited_alphabet[ord(board[start[0]][start[1]])-65]

    while stack:
        r, c = stack.pop()
        alpha = ord(board[r][c]) -65

        if visited_alphabet[alpha]:
            continue
        else:
            visited_alphabet[alpha] = True

        for dr, dc in move:
            next_r = r + dr
            next_c = c + dc

            if (next_r < 0 or next_r > R-1) or (next_c < 0 or next_c > C-1):
                continue
            
            stack.append((next_r, next_c))

    return visited_alphabet

visited_alpha = dfs(board, (0,0))
answer = 0
for i in range(26):
    answer += 1 if visited_alpha[i] else 0
print(answer)
```

ê²°ê³¼ëŠ” **ì‹¤íŒ¨**ì˜€ë‹¤. ğŸ˜­

ë‚´ ì½”ë“œëŠ” ë‹¨ìˆœíˆ ì‹œì‘ì ì—ì„œë¶€í„° ë„ë‹¬í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²½ë¡œìƒì˜ ì•ŒíŒŒë²³ ì¢…ë¥˜ ìˆ˜ë¥¼ ì„¸ëŠ” ê²ƒì´ì—ˆë‹¤. ë¬¸ì œì˜ ìš”êµ¬ì‚¬í•­ì¸ 'ë§ì´ ì´ë™í•œ ìµœëŒ€ ì¹¸ ìˆ˜', ì¦‰ **ê°€ì¥ ê¸´ ê²½ë¡œì˜ ê¸¸ì´**ë¥¼ êµ¬í•˜ëŠ” ê²ƒê³¼ëŠ” ê±°ë¦¬ê°€ ë©€ì—ˆë‹¤.

## ë‘ ë²ˆì§¸ ì‹œë„: ë°±íŠ¸ë˜í‚¹ì„ ì´ìš©í•œ DFS

ë¬¸ì œì˜ í•µì‹¬ì€ 'ê°€ì¥ ê¸´ ê²½ë¡œ'ë¥¼ ì°¾ëŠ” ê²ƒì´ë¯€ë¡œ, í•œ ê²½ë¡œë¡œ ëê¹Œì§€ íƒìƒ‰í•œ ë’¤ì—ëŠ” ë‹¤ì‹œ ëŒì•„ì™€ ë‹¤ë¥¸ ê²½ë¡œë¥¼ íƒìƒ‰í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ë‹¤. ì¦‰, **ë°±íŠ¸ë˜í‚¹(Backtracking)** ì´ í•„ìš”í•œ ë¬¸ì œì˜€ë‹¤.

DFS íƒìƒ‰ì„ ì¬ê·€ì ìœ¼ë¡œ êµ¬í˜„í•˜ê³ , ì¬ê·€ í˜¸ì¶œì´ ëë‚  ë•Œë§ˆë‹¤ ë°©ë¬¸í–ˆë˜ ì•ŒíŒŒë²³ì˜ ë°©ë¬¸ í‘œì‹œë¥¼ í•´ì œí•˜ì—¬ ë‹¤ë¥¸ íƒìƒ‰ ê²½ë¡œì—ì„œ í•´ë‹¹ ì•ŒíŒŒë²³ì„ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë¡œì§ì„ ìˆ˜ì •í–ˆë‹¤.

```python
import sys
sys.setrecursionlimit(10000)

R, C = map(int, sys.stdin.readline().split())
board = [list(sys.stdin.readline().rstrip()) for _ in range(R)]
move = [(-1, 0), (0, -1), (1, 0), (0, 1)]  # ìƒ ì¢Œ í•˜ ìš°

visited = [False] * 26
answer = 0

def dfs(r, c, depth):
    global answer
    answer = max(answer, depth)

    for dr, dc in move:
        nr, nc = r + dr, c + dc
        if 0 <= nr < R and 0 <= nc < C:
            alpha = ord(board[nr][nc]) - 65
            if not visited[alpha]:
                visited[alpha] = True
                dfs(nr, nc, depth + 1)
                visited[alpha] = False   # ë°±íŠ¸ë˜í‚¹: ì¬ê·€ í›„ ë°©ë¬¸ í‘œì‹œ í•´ì œ

# ì‹œì‘ì  ë°©ë¬¸ ì²˜ë¦¬
visited[ord(board[0][0]) - 65] = True
dfs(0, 0, 1)

print(answer)
```

ì´ ì½”ë“œë¥¼ ì œì¶œí•˜ë‹ˆ Python3ì—ì„œëŠ” **ì‹œê°„ ì´ˆê³¼**ê°€ ë°œìƒí–ˆë‹¤. í•˜ì§€ë§Œ PyPy3ë¡œ ì œì¶œí•˜ë‹ˆ **ì„±ê³µ**ì ìœ¼ë¡œ í†µê³¼í•  ìˆ˜ ìˆì—ˆë‹¤! ğŸ‰

## ê²°ë¡ 

'ì•ŒíŒŒë²³' ë¬¸ì œëŠ” ë‹¨ìˆœíˆ ë°©ë¬¸ ê°€ëŠ¥í•œ ë…¸ë“œë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” 'ê°€ì¥ ê¸´ ê²½ë¡œ'ë¥¼ ì°¾ëŠ” ë¬¸ì œì´ë¯€ë¡œ ë°±íŠ¸ë˜í‚¹ì„ í™œìš©í•œ ì™„ì „ íƒìƒ‰ì´ í•„ìˆ˜ì ì´ì—ˆë‹¤. ë˜í•œ, Pythonì˜ ì¬ê·€ ê¹Šì´ ì œí•œê³¼ ì‹¤í–‰ ì†ë„ ë¬¸ì œë¡œ ì¸í•´ `sys.setrecursionlimit` ì„¤ì •ê³¼ PyPy3 ì œì¶œì´ ìœ íš¨í•œ í•´ê²°ì±…ì´ ë˜ì—ˆë‹¤.

ë°±íŠ¸ë˜í‚¹ì˜ ê°œë…ì„ ë‹¤ì‹œ í•œë²ˆ í™•ì‹¤íˆ ë‹¤ì§ˆ ìˆ˜ ìˆì—ˆë˜ ì¢‹ì€ ë¬¸ì œì˜€ë‹¤.
